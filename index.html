<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>

<head>
<title>Playii</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<script language="javascript" src="/base/jquery.js"></script>
<script language="javascript" src="/base/json.js"></script>
<script language="javascript" src="/base/playii.js"></script>

</head>

<body>

  <div id="root"> </div>
  
  <div id="tool" style="display:none;">
    <ul>
      <li>iphone</li>
      <ul>
	<li id="landscape">landscape</li>
	<li id="portscape">portscape</li>
      </ul>
      <li id="web">web</li>
      <ul>
	<li id="debug">debug</li>
	<li>...</li>
      </ul>
    </ul>
  </div>

  <div id="log" style="display:none;"></div>

</body>

<style type="text/css">
body {
}
* {
  margin:0; padding:0;
}
#tool {
  position:absolute;
  top:0px; right:0px;
}
#log {
  position:absolute;
  top:320px; left:320px;
  width:480px; height:160px;
  overflow:auto;
  background:#444;
  font: normal normal 88% "Courier";
}
</style>

<script language="javascript">

$(function(){

  // identify logic
  var callback = {
    success:function(){
      ui.load("#root", "/base/main.html");
    },
    go_identify:function(){
      ui.load("#root", "/base/auth.html");
    },
    failure:function(error){
      $("#root").empty().html("sorry, we got error:<hr/>"+error+"<hr/>");
    }
  };
  con.open({}, callback);

  // **** mock console if not avaliable
  if (window.console === undefined) console = (function(){
    function log(lvl, str){
      $("#log").append("["+lvl+"]"+str+"<br>");
      // auto scroll to bottom
      var t = $("#log").get(0).scrollHeight;
      var v = $("#log").get(0).offsetHeight;
      $("#log").get(0).scrollTop = t - v;
    }
    $(document).keypress(function(k){
      // alert(k.keyCode);
      if(k.keyCode == 119) $("#log").toggle(); // bind F8 key as log mode
      return false;
    });
    return {
      debug: function(s){ log("DEBUG", s); },
      info:  function(s){ log("INFO ", s); },
      error: function(s){ log("ERROR", s); },
      warn:  function(s){ log("WARN ", s); },
      fatal: function(s){ log("FATAL", s); }
    };
  })();

});
</script>

</html>

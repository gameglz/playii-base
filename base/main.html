<div id="side" style="display:none;"></div>
<div id="main" style="display:none;"></div>

<style type="text/css">
* {
  margin:0; padding:0;
}

#side {
  position:absolute;
  top:0px; left:0px;
  width:320px; height:480px;
  background:#222;
}
#main {
  position:absolute;
  top:0px; left:320px;
  width:480px; height:320px;
  background:#333;
}
</style>

<script language="javascript">

// **** the scene nameing
if (!this.getScene) getScene = function(){
  var url = window.location.hash.split('#')[1];
  return (url) ? url : undefined;
};

// **** the scene changing
if (!this.goUrl) goUrl = function(url){
  _log("goUrl('"+url+"')");
  con.unbind(getScene());
  window.location = "/#"+url;
  window.location.reload();
  // ui.load("#main", url);
};

// **** the boot loader :: load everything
$(function(){

  // current device orient
  // iphone : landscape/portscape
  // web : undefined
  var currentDirect = "landscape"; // undefined;

  // iphone ui // for iphone
  function iphone_ui(){
    var x = undefined;
    if (window.outerWidth == 480) x = "landscape";
    else if (window.outerWidth == 320) x = "portscape";
    else x = undefined;
    if (x != currentDirect) switch_ui(x);
    // window.setTimeout(function(){ iphone_ui(); }, 400); // iphone detect
  }

  function switch_ui(direct){
    switch(direct){
      case "landscape" :
        $("#side").hide();
        $("#main").css({top:'0px', left:'0px'}).show();
        break;
      case "portscape" :
        $("#side").css({top:'0px', left:'0px'}).show();
        $("#main").hide();
        break;
      default :
        $("#main").css({top:'0px', left:'320px'}).show();
        $("#side").css({top:'0px', left:'0px'}).show();
        break;
    }
    currentDirect = direct;
  }

  iphone_ui();

  $("#tool #landscape").click(function(){ switch_ui("landscape"); });
  $("#tool #portscape").click(function(){ switch_ui("portscape"); });
  $("#tool #web").click(function(){ switch_ui(); });

  ui.load("#side", "/side");
  ui.load("#main", getScene() ? getScene() : "/home" );
});

</script>
